# ============================================================================
# PLOS - Personal Life Management System - Production Environment
# ============================================================================
# Last Updated: December 31, 2025
# This file contains production-ready configuration with Gemini API keys
# IMPORTANT: Copy to .env and update values before deployment
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
# Environment: development | staging | production
APP_ENV=production
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# GEMINI API (Google AI) - Primary AI Integration with Key Rotation
# ============================================================================
# API Key Rotation Configuration
GEMINI_API_KEY_ROTATION_ENABLED=true
GEMINI_API_KEY_ROTATION_MAX_RETRIES=3
GEMINI_API_KEY_ROTATION_BACKOFF_SECONDS=60

# Multiple API Keys (comma-separated format: key|name,key|name)
# Format allows unlimited number of keys with descriptive names
# Example: AIzaSy...key1|primary,AIzaSy...key2|backup-1,AIzaSy...key3|backup-2
GEMINI_API_KEYS=

# Legacy format (deprecated - use GEMINI_API_KEYS instead)
# GEMINI_API_KEY=

# Gemini Model Configuration (Updated to latest models)
# gemini-2.5-flash: Most balanced, 1M tokens, best for general use (RECOMMENDED DEFAULT)
# gemini-2.5-pro: Advanced reasoning, best for complex coding/analysis
# gemini-3-flash-preview: Latest experimental, frontier-class performance
GEMINI_DEFAULT_MODEL=gemini-2.5-flash
GEMINI_VISION_MODEL=gemini-2.5-flash
GEMINI_PRO_MODEL=gemini-2.5-pro
GEMINI_EMBEDDING_MODEL=text-embedding-004
USE_GEMINI_CACHING=true

# ============================================================================
# SUPABASE DATABASE
# ============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=plos_db_secure_2025
POSTGRES_DB=plos
POSTGRES_HOST=supabase-db
POSTGRES_PORT=5432

# Supabase JWT Configuration
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
JWT_EXP=3600

# Supabase Keys (for Studio and API access)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq

# Supabase Service Ports
SUPABASE_STUDIO_PORT=3000
META_PORT=9085

# ============================================================================
# REDIS CACHE & SESSION STORE
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=plos_redis_secure_2025

# ============================================================================
# KAFKA MESSAGE BROKER
# ============================================================================
KAFKA_BROKERS=kafka:9092
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_PARTITIONS=3
KAFKA_REPLICATION_FACTOR=1

# Dead Letter Queue (DLQ) Configuration
KAFKA_DLQ_TOPIC=gemini-api-dlq
DLQ_RETENTION_DAYS=7
DLQ_AUTO_RETRY_ENABLED=true
DLQ_RETRY_DELAY_MS=5000

# ============================================================================
# API GATEWAY (KONG)
# ============================================================================
KONG_DATABASE=postgres
KONG_PG_HOST=supabase-db
KONG_PG_USER=postgres
KONG_PG_PASSWORD=plos_db_secure_2025
KONG_PG_DATABASE=kong

# ============================================================================
# SERVICE PORTS - BACKEND ONLY
# ============================================================================
API_GATEWAY_PORT=8000
CONTEXT_BROKER_PORT=8001
JOURNAL_PARSER_PORT=8002

# ============================================================================
# UI TOOLS (DISABLE IN PRODUCTION)
# ============================================================================
# NOTE: pgAdmin has been removed - use Supabase Studio at http://localhost:3000
REDIS_COMMANDER_PORT=8081

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3333
KAFKA_UI_PORT=18080

# ============================================================================
# SECURITY (CHANGE IN PRODUCTION!)
# ============================================================================
# IMPORTANT: Generate strong secrets for production!
# Use: openssl rand -hex 32
JWT_SECRET=plos-jwt-secret-change-in-production-2025
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600


# ============================================================================
# CORS SETTINGS (Adjust for your frontend domain)
# ============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
